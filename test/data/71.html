






















































Don't run bumpversion on package-lock.json by benjaoming · Pull Request #1321 · readthedocs/sphinx_rtd_theme · GitHub













































Skip to content







Toggle navigation










            Sign up
          


 




 







      Product
      











Actions
        Automate any workflow
      







Packages
        Host and manage packages
      







Security
        Find and fix vulnerabilities
      







Codespaces
        Instant dev environments
      







Copilot
        Write better code with AI
      







Code review
        Manage code changes
      







Issues
        Plan and track work
      







Discussions
        Collaborate outside of code
      



Explore


      All features

    



      Documentation

    





      GitHub Skills

    





      Blog

    








      Solutions
      





By Plan


      Enterprise

    



      Teams

    



      Compare all

    



By Solution


      CI/CD & Automation

    





      DevOps

    





      DevSecOps

    





Case Studies


      Customer Stories

    



      Resources

    








      Open Source
      








GitHub Sponsors
        Fund open source developers
      






The ReadME Project
        GitHub community articles
      



Repositories


      Topics

    



      Trending

    



      Collections

    





Pricing

































        In this repository
      

        All GitHub
      
↵


      Jump to
      ↵






No suggested jump to results





















        In this repository
      

        All GitHub
      
↵


      Jump to
      ↵





















        In this organization
      

        All GitHub
      
↵


      Jump to
      ↵





















        In this repository
      

        All GitHub
      
↵


      Jump to
      ↵






 




              Sign in
            


              Sign up
            






















readthedocs

/

sphinx_rtd_theme

Public




 

Notifications



 

Fork
    1.7k




 


          Star
 4.2k
  















Code







Issues
150






Pull requests
68






Actions







Projects
2






Wiki







Security







Insights



 
 



More


 



                    Code
 


                    Issues
 


                    Pull requests
 


                    Actions
 


                    Projects
 


                    Wiki
 


                    Security
 


                    Insights
 
















    
    New issue
  

 


 







Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
  
 
Pick a username



Email Address


Password




    Sign up for GitHub


By clicking “Sign up for GitHub”, you agree to our terms of service and
  privacy statement. We’ll occasionally send you account related emails.

    Already on GitHub?
    Sign in
    to your account
  





Jump to bottom



Don't run bumpversion on package-lock.json
#1321






 Merged



benjaoming
  merged 6 commits into



  readthedocs:master

from

benjaoming:no-bumpversion-package-lock.json







Aug 19, 2022








 Merged





    Don't run bumpversion on package-lock.json
  
#1321


benjaoming
  merged 6 commits into



  readthedocs:master

from

benjaoming:no-bumpversion-package-lock.json







Aug 19, 2022















      Conversation

      17





      Commits

      6





  Checks

  0





      Files changed

    





 Conversation












 





    
            Copy link

 




    Contributor





benjaoming


    

    commented


      Aug 19, 2022

•




          edited
          
        





















Fixes #1117 and #1310
















    Sorry, something went wrong.
  








    All reactions

 


 












 
benjaoming


          requested a review
  from a team
    as a code owner

Aug 19, 2022











 






 



Do not bump the version in auto-maintained file package-lock.json























5087916






 







 
benjaoming
force-pushed
    the
        

no-bumpversion-package-lock.json


 branch
    from
    
0acb2e3
    to
    
5087916
     Compare


Aug 19, 2022











benjaoming




      changed the title
No bumpversion package lock.json
Don't run bumpversion on package-lock.json
Aug 19, 2022











 

agjohnson


          reviewed


          

Aug 19, 2022




 
View changes






 



 





    
            Copy link

 




    Collaborator





agjohnson


    

    left a comment



    
  





We could come back to the documentation updates once you've gone through the release process.















    Sorry, something went wrong.
  








    All reactions

 


 







 

 

docs/contributing.rst

              Outdated
 


Show resolved


Hide resolved


 









 

docs/contributing.rst

              Outdated
 


 







#. Run ``python setup.py build_assets`` to rebuild all the theme assets and the Python






   package.






#. Run ``npm run build`` to rebuild all the theme assets and the Python






   package, notice that ``package-lock.json`` will be updated with a new package











 





    
            Copy link

 




    Collaborator





agjohnson

Aug 19, 2022











There was a problem hiding this comment.







Choose a reason for hiding this comment

      The reason will be displayed to describe this comment to others. Learn more.
    



        Choose a reason
        
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

    Hide comment




package-lock.json is updated on npm install, not npm run build. npm install might run if you've never run npm run build before though.
















    Sorry, something went wrong.
  








    All reactions

 


 








 





    
            Copy link

 




    Contributor

Author




benjaoming

Aug 19, 2022











There was a problem hiding this comment.







Choose a reason for hiding this comment

      The reason will be displayed to describe this comment to others. Learn more.
    



        Choose a reason
        
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

    Hide comment




True. Shouldn't we just add npm run install then?
















    Sorry, something went wrong.
  








    All reactions

 


 








 





    
            Copy link

 




    Contributor

Author




benjaoming

Aug 19, 2022











There was a problem hiding this comment.







Choose a reason for hiding this comment

      The reason will be displayed to describe this comment to others. Learn more.
    



        Choose a reason
        
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

    Hide comment




Perhaps it is better to exclude anything that touches package-lock.json from the build process.
















    Sorry, something went wrong.
  








    All reactions

 


 








 





    
            Copy link

 




    Collaborator





agjohnson

Aug 19, 2022











There was a problem hiding this comment.







Choose a reason for hiding this comment

      The reason will be displayed to describe this comment to others. Learn more.
    



        Choose a reason
        
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

    Hide comment




I think the existing commands using python setup.py build_assets do all of this for us. It doesn't seem like we have any strong reason to change this, really.

Perhaps it is better to exclude anything that touches package-lock.json from the build process.

From the release process that is? It's best to have the lock file represent the build artifacts probably, I think it's helpful to have included in the release. It's not likely to be of much use to anyone, but will be used in CI to verify the release (as dependencies will install via npm ci in CI).
















    Sorry, something went wrong.
  








    All reactions

 


 








 





    
            Copy link

 




    Contributor

Author




benjaoming

Aug 19, 2022











There was a problem hiding this comment.







Choose a reason for hiding this comment

      The reason will be displayed to describe this comment to others. Learn more.
    



        Choose a reason
        
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

    Hide comment




This might be a Catch 22... what I mean is that if package-lock.json isn't touched during the release process, we shouldn't make updates to it.If we need to run commands that changes it, we should also be aware.
















    Sorry, something went wrong.
  








    All reactions

 


 











 

docs/contributing.rst

              Outdated
 


Show resolved


Hide resolved


 








 








 benjaoming
  

          added 3 commits
          
Aug 19, 2022

 




 






 



Adds wheel and a command to package bdist_wheel + sdist























8e65b61






 



 






 



Build everything one step at a time























e844040






 



 






 



Make note about releasing package-lock.json























8e737d4






 







 
benjaoming
force-pushed
    the
        

no-bumpversion-package-lock.json


 branch
    from
    
2e8c65a
    to
    
8e737d4
     Compare


Aug 19, 2022











 






 



Do not build the python package in this step























7c43f45






 










 

agjohnson


          approved these changes


          

Aug 19, 2022




 
View changes






 



 





    
            Copy link

 




    Collaborator





agjohnson


    

    left a comment



    
  





Changes look good!















    Sorry, something went wrong.
  








    All reactions

 


 









 









 






 



Merge remote-tracking branch 'upstream/master' into no-bumpversion-pa…


    …
 






















47a2582





…ckage-lock.json



 










 Hide details
View details


benjaoming



        merged commit d343a1d
      into

      

readthedocs:master


Aug 19, 2022

        7 checks passed
      















 
benjaoming


    
    deleted the
    

        no-bumpversion-package-lock.json
 
    branch

    
Aug 19, 2022










benjaoming 

      added a commit
        to benjaoming/sphinx_rtd_theme
      that referenced
      this pull request

    
Aug 24, 2022









 



Fixup a wrong merge conflict resolution from readthedocs#1321















14c48ab

















benjaoming



    mentioned this pull request
    
Aug 24, 2022





      Fixup a wrong merge conflict resolution from #1321
      #1335
 


 Merged












benjaoming 

      added a commit
      that referenced
      this pull request

    
Aug 27, 2022









 



Fixup a wrong merge conflict resolution from #1321 (#1335)


…






















70927bf





* Fixup a wrong merge conflict resolution from #1321

* Add python_requires again to setup.cfg










 




Sign up for free
to join this conversation on GitHub.
    Already have an account?
    Sign in to comment











    Reviewers
  





 
agjohnson














    Assignees
  

    No one assigned




    Labels
  

    None yet





    Projects
  



    None yet


 



    Milestone
  

      No milestone








    Development
  
Successfully merging this pull request may close these issues.



        Problems with bumpversion
      

 






      2 participants
    



 

 




 


Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.











Footer







 
        © 2022 GitHub, Inc.
        



Footer navigation

Terms
Privacy
Security
Status
Docs
Contact GitHub
Pricing
API
Training
Blog
About
















    You can’t perform that action at this time.
  




You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.









